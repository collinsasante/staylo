"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/news";
exports.ids = ["pages/api/news"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("firebase/firestore");;

/***/ }),

/***/ "firebase/storage":
/*!***********************************!*\
  !*** external "firebase/storage" ***!
  \***********************************/
/***/ ((module) => {

module.exports = import("firebase/storage");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/news/index.ts */ \"(api)/./pages/api/news/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/news\",\n        pathname: \"/api/news\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5ld3MmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRm5ld3MlMkZpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNzRDtBQUN0RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMscURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHFEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hvc3RlbC1uZXh0anMvPzVmMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9uZXdzL2luZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbmV3c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25ld3NcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_1__.auth),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   loginWithEmail: () => (/* binding */ loginWithEmail),\n/* harmony export */   logout: () => (/* binding */ logout)\n/* harmony export */ });\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./firebase */ \"(api)/./lib/firebase.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_auth__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_auth__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n// Re-export auth for convenience\n\n/**\r\n * Sign in with email and password\r\n */ const loginWithEmail = async (email, password)=>{\n    try {\n        const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithEmailAndPassword)(_firebase__WEBPACK_IMPORTED_MODULE_1__.auth, email, password);\n        return userCredential.user;\n    } catch (error) {\n        console.error(\"Login error:\", error);\n        throw new Error(getAuthErrorMessage(error.code));\n    }\n};\n/**\r\n * Sign out current user\r\n */ const logout = async ()=>{\n    try {\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_1__.auth);\n    } catch (error) {\n        console.error(\"Logout error:\", error);\n        throw error;\n    }\n};\n/**\r\n * Get current user\r\n */ const getCurrentUser = ()=>{\n    return new Promise((resolve)=>{\n        const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_1__.auth, (user)=>{\n            unsubscribe();\n            resolve(user);\n        });\n    });\n};\n/**\r\n * Convert Firebase auth error codes to user-friendly messages\r\n */ const getAuthErrorMessage = (errorCode)=>{\n    const errorMessages = {\n        \"auth/invalid-email\": \"Invalid email address\",\n        \"auth/user-disabled\": \"This account has been disabled\",\n        \"auth/user-not-found\": \"Invalid email or password\",\n        \"auth/wrong-password\": \"Invalid email or password\",\n        \"auth/invalid-credential\": \"Invalid email or password\",\n        \"auth/too-many-requests\": \"Too many failed login attempts. Please try again later\"\n    };\n    return errorMessages[errorCode] || \"Login failed. Please try again\";\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEY7QUFDNUQ7QUFFbEMsaUNBQWlDO0FBQ2pCO0FBRWhCOztDQUVDLEdBQ00sTUFBTUksaUJBQWlCLE9BQU9DLE9BQWVDO0lBQ2xELElBQUk7UUFDRixNQUFNQyxpQkFBaUIsTUFBTVAseUVBQTBCQSxDQUFDRywyQ0FBSUEsRUFBRUUsT0FBT0M7UUFDckUsT0FBT0MsZUFBZUMsSUFBSTtJQUM1QixFQUFFLE9BQU9DLE9BQVk7UUFDbkJDLFFBQVFELEtBQUssQ0FBQyxnQkFBZ0JBO1FBQzlCLE1BQU0sSUFBSUUsTUFBTUMsb0JBQW9CSCxNQUFNSSxJQUFJO0lBQ2hEO0FBQ0YsRUFBRTtBQUVGOztDQUVDLEdBQ00sTUFBTUMsU0FBUztJQUNwQixJQUFJO1FBQ0YsTUFBTWIsc0RBQU9BLENBQUNFLDJDQUFJQTtJQUNwQixFQUFFLE9BQU9NLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlCQUFpQkE7UUFDL0IsTUFBTUE7SUFDUjtBQUNGLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1NLGlCQUFpQjtJQUM1QixPQUFPLElBQUlDLFFBQVEsQ0FBQ0M7UUFDbEIsTUFBTUMsY0FBY2hCLGlFQUFrQkEsQ0FBQ0MsMkNBQUlBLEVBQUUsQ0FBQ0s7WUFDNUNVO1lBQ0FELFFBQVFUO1FBQ1Y7SUFDRjtBQUNGLEVBQUU7QUFFRjs7Q0FFQyxHQUNELE1BQU1JLHNCQUFzQixDQUFDTztJQUMzQixNQUFNQyxnQkFBMkM7UUFDL0Msc0JBQXNCO1FBQ3RCLHNCQUFzQjtRQUN0Qix1QkFBdUI7UUFDdkIsdUJBQXVCO1FBQ3ZCLDJCQUEyQjtRQUMzQiwwQkFBMEI7SUFDNUI7SUFFQSxPQUFPQSxhQUFhLENBQUNELFVBQVUsSUFBSTtBQUNyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hvc3RlbC1uZXh0anMvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBzaWduT3V0LCBvbkF1dGhTdGF0ZUNoYW5nZWQsIFVzZXIgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gJy4vZmlyZWJhc2UnO1xyXG5cclxuLy8gUmUtZXhwb3J0IGF1dGggZm9yIGNvbnZlbmllbmNlXHJcbmV4cG9ydCB7IGF1dGggfTtcclxuXHJcbi8qKlxyXG4gKiBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbG9naW5XaXRoRW1haWwgPSBhc3luYyAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8VXNlcj4gPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWwudXNlcjtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdMb2dpbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0QXV0aEVycm9yTWVzc2FnZShlcnJvci5jb2RlKSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNpZ24gb3V0IGN1cnJlbnQgdXNlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGxvZ291dCA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgc2lnbk91dChhdXRoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignTG9nb3V0IGVycm9yOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgY3VycmVudCB1c2VyXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFVzZXIgPSAoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4gPT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHVzZXIpID0+IHtcclxuICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgcmVzb2x2ZSh1c2VyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgRmlyZWJhc2UgYXV0aCBlcnJvciBjb2RlcyB0byB1c2VyLWZyaWVuZGx5IG1lc3NhZ2VzXHJcbiAqL1xyXG5jb25zdCBnZXRBdXRoRXJyb3JNZXNzYWdlID0gKGVycm9yQ29kZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICBjb25zdCBlcnJvck1lc3NhZ2VzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgJ2F1dGgvaW52YWxpZC1lbWFpbCc6ICdJbnZhbGlkIGVtYWlsIGFkZHJlc3MnLFxyXG4gICAgJ2F1dGgvdXNlci1kaXNhYmxlZCc6ICdUaGlzIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQnLFxyXG4gICAgJ2F1dGgvdXNlci1ub3QtZm91bmQnOiAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcsXHJcbiAgICAnYXV0aC93cm9uZy1wYXNzd29yZCc6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyxcclxuICAgICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCc6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyxcclxuICAgICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJzogJ1RvbyBtYW55IGZhaWxlZCBsb2dpbiBhdHRlbXB0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicsXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGVycm9yTWVzc2FnZXNbZXJyb3JDb2RlXSB8fCAnTG9naW4gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluJztcclxufTtcclxuIl0sIm5hbWVzIjpbInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbk91dCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImF1dGgiLCJsb2dpbldpdGhFbWFpbCIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyQ3JlZGVudGlhbCIsInVzZXIiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsImdldEF1dGhFcnJvck1lc3NhZ2UiLCJjb2RlIiwibG9nb3V0IiwiZ2V0Q3VycmVudFVzZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInVuc3Vic2NyaWJlIiwiZXJyb3JDb2RlIiwiZXJyb3JNZXNzYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/firebase.ts":
/*!*************************!*\
  !*** ./lib/firebase.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   app: () => (/* binding */ app),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, firebase_storage__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, firebase_storage__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBGcqsKd6NYzKxWPYZfF_cg37g5nEMMh2U\",\n    authDomain: \"staylo-hostels-96cae.firebaseapp.com\",\n    projectId: \"staylo-hostels-96cae\",\n    storageBucket: \"staylo-hostels-96cae.firebasestorage.app\",\n    messagingSenderId: \"135507299145\",\n    appId: \"1:135507299145:web:072238ab77b565ebd2e898\"\n};\n// Initialize Firebase\nlet app;\nlet auth;\nlet db;\nlet storage;\nif (!(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length) {\n    app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n    auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\n    db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n    storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getStorage)(app);\n} else {\n    app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)()[0];\n    auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\n    db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n    storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getStorage)(app);\n}\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZmlyZWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBbUU7QUFDckI7QUFDZTtBQUNFO0FBRS9ELE1BQU1LLGlCQUFpQjtJQUNyQkMsUUFBUUMseUNBQXdDO0lBQ2hERyxZQUFZSCxzQ0FBNEM7SUFDeERLLFdBQVdMLHNCQUEyQztJQUN0RE8sZUFBZVAsMENBQStDO0lBQzlEUyxtQkFBbUJULGNBQW9EO0lBQ3ZFVyxPQUFPWCwyQ0FBdUM7QUFDaEQ7QUFFQSxzQkFBc0I7QUFDdEIsSUFBSWE7QUFDSixJQUFJQztBQUNKLElBQUlDO0FBQ0osSUFBSUM7QUFFSixJQUFJLENBQUN0QixxREFBT0EsR0FBR3VCLE1BQU0sRUFBRTtJQUNyQkosTUFBTXBCLDJEQUFhQSxDQUFDSztJQUNwQmdCLE9BQU9uQixzREFBT0EsQ0FBQ2tCO0lBQ2ZFLEtBQUtuQixnRUFBWUEsQ0FBQ2lCO0lBQ2xCRyxVQUFVbkIsNERBQVVBLENBQUNnQjtBQUN2QixPQUFPO0lBQ0xBLE1BQU1uQixxREFBT0EsRUFBRSxDQUFDLEVBQUU7SUFDbEJvQixPQUFPbkIsc0RBQU9BLENBQUNrQjtJQUNmRSxLQUFLbkIsZ0VBQVlBLENBQUNpQjtJQUNsQkcsVUFBVW5CLDREQUFVQSxDQUFDZ0I7QUFDdkI7QUFFa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob3N0ZWwtbmV4dGpzLy4vbGliL2ZpcmViYXNlLnRzPzVkMjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCwgZ2V0QXBwcywgRmlyZWJhc2VBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xyXG5pbXBvcnQgeyBnZXRBdXRoLCBBdXRoIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XHJcbmltcG9ydCB7IGdldEZpcmVzdG9yZSwgRmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHsgZ2V0U3RvcmFnZSwgRmlyZWJhc2VTdG9yYWdlIH0gZnJvbSAnZmlyZWJhc2Uvc3RvcmFnZSc7XHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVksXHJcbiAgYXV0aERvbWFpbjogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVVUSF9ET01BSU4sXHJcbiAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lELFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VULFxyXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lELFxyXG4gIGFwcElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQsXHJcbn07XHJcblxyXG4vLyBJbml0aWFsaXplIEZpcmViYXNlXHJcbmxldCBhcHA6IEZpcmViYXNlQXBwO1xyXG5sZXQgYXV0aDogQXV0aDtcclxubGV0IGRiOiBGaXJlc3RvcmU7XHJcbmxldCBzdG9yYWdlOiBGaXJlYmFzZVN0b3JhZ2U7XHJcblxyXG5pZiAoIWdldEFwcHMoKS5sZW5ndGgpIHtcclxuICBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuICBhdXRoID0gZ2V0QXV0aChhcHApO1xyXG4gIGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XHJcbiAgc3RvcmFnZSA9IGdldFN0b3JhZ2UoYXBwKTtcclxufSBlbHNlIHtcclxuICBhcHAgPSBnZXRBcHBzKClbMF07XHJcbiAgYXV0aCA9IGdldEF1dGgoYXBwKTtcclxuICBkYiA9IGdldEZpcmVzdG9yZShhcHApO1xyXG4gIHN0b3JhZ2UgPSBnZXRTdG9yYWdlKGFwcCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGFwcCwgYXV0aCwgZGIsIHN0b3JhZ2UgfTtcclxuIl0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJnZXRBcHBzIiwiZ2V0QXV0aCIsImdldEZpcmVzdG9yZSIsImdldFN0b3JhZ2UiLCJmaXJlYmFzZUNvbmZpZyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BUElfS0VZIiwiYXV0aERvbWFpbiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOIiwicHJvamVjdElkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfUFJPSkVDVF9JRCIsInN0b3JhZ2VCdWNrZXQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCIsImFwcElkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBQX0lEIiwiYXBwIiwiYXV0aCIsImRiIiwic3RvcmFnZSIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/firebase.ts\n");

/***/ }),

/***/ "(api)/./lib/middleware.ts":
/*!***************************!*\
  !*** ./lib/middleware.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compose: () => (/* binding */ compose),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   withCors: () => (/* binding */ withCors),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler),\n/* harmony export */   withLogging: () => (/* binding */ withLogging),\n/* harmony export */   withRateLimit: () => (/* binding */ withRateLimit),\n/* harmony export */   withValidation: () => (/* binding */ withValidation)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth */ \"(api)/./lib/auth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__]);\n_auth__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Rate limiting store (in-memory)\nconst rateLimitStore = new Map();\n/**\r\n * Firebase Authentication Middleware\r\n * Verifies Firebase ID tokens from Authorization header\r\n */ const requireAuth = (handler)=>{\n    return async (req, res)=>{\n        try {\n            // Get token from Authorization header\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    success: false,\n                    error: \"Unauthorized - No token provided\"\n                });\n            }\n            const token = authHeader.replace(\"Bearer \", \"\");\n            try {\n                // Verify token with Firebase (client-side auth object)\n                // In a production environment with Firebase Admin SDK:\n                // const decodedToken = await admin.auth().verifyIdToken(token);\n                // req.user = decodedToken;\n                // For now, we check if auth.currentUser exists (client-side)\n                // This is a simplified check - in production use Firebase Admin SDK\n                const currentUser = _auth__WEBPACK_IMPORTED_MODULE_0__.auth.currentUser;\n                if (!currentUser) {\n                    return res.status(401).json({\n                        success: false,\n                        error: \"Unauthorized - Invalid or expired token\"\n                    });\n                }\n                // Attach user info to request (for logging/tracking)\n                req.user = {\n                    uid: currentUser.uid,\n                    email: currentUser.email\n                };\n                // Call the handler\n                return handler(req, res);\n            } catch (verifyError) {\n                console.error(\"Token verification error:\", verifyError);\n                return res.status(401).json({\n                    success: false,\n                    error: \"Unauthorized - Token verification failed\"\n                });\n            }\n        } catch (error) {\n            console.error(\"Auth middleware error:\", error);\n            return res.status(401).json({\n                success: false,\n                error: \"Unauthorized - Authentication failed\"\n            });\n        }\n    };\n};\n/**\r\n * Rate Limiting Middleware\r\n * Limits requests per IP address\r\n */ const withRateLimit = (handler, options = {})=>{\n    const maxRequests = options.maxRequests || 100; // 100 requests\n    const windowMs = options.windowMs || 15 * 60 * 1000; // 15 minutes\n    return async (req, res)=>{\n        // Get client IP\n        const ip = req.headers[\"x-forwarded-for\"]?.split(\",\")[0] || req.headers[\"x-real-ip\"] || \"unknown\";\n        const now = Date.now();\n        const record = rateLimitStore.get(ip);\n        // Clean up expired records (every 100 requests)\n        if (Math.random() < 0.01) {\n            for (const [key, value] of rateLimitStore.entries()){\n                if (value.resetAt < now) {\n                    rateLimitStore.delete(key);\n                }\n            }\n        }\n        if (record) {\n            if (record.resetAt > now) {\n                // Within window\n                if (record.count >= maxRequests) {\n                    return res.status(429).json({\n                        success: false,\n                        error: \"Too many requests. Please try again later.\",\n                        retryAfter: Math.ceil((record.resetAt - now) / 1000)\n                    });\n                }\n                record.count++;\n            } else {\n                // Window expired, reset\n                record.count = 1;\n                record.resetAt = now + windowMs;\n            }\n        } else {\n            // New IP\n            rateLimitStore.set(ip, {\n                count: 1,\n                resetAt: now + windowMs\n            });\n        }\n        return handler(req, res);\n    };\n};\n/**\r\n * CORS middleware for API routes\r\n */ const withCors = (handler)=>{\n    return async (req, res)=>{\n        res.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n        res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n        res.setHeader(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\");\n        res.setHeader(\"Access-Control-Allow-Headers\", \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization\");\n        if (req.method === \"OPTIONS\") {\n            res.status(200).end();\n            return;\n        }\n        return handler(req, res);\n    };\n};\n/**\r\n * Request Validation Middleware\r\n * Validates and sanitizes request data\r\n */ const withValidation = (handler, schema)=>{\n    return async (req, res)=>{\n        // Validate body if schema provided\n        if (schema?.body && req.body) {\n            const validation = schema.body(req.body);\n            if (!validation.valid) {\n                return res.status(400).json({\n                    success: false,\n                    error: \"Validation failed\",\n                    details: validation.errors\n                });\n            }\n        }\n        // Validate query params if schema provided\n        if (schema?.query && req.query) {\n            const validation = schema.query(req.query);\n            if (!validation.valid) {\n                return res.status(400).json({\n                    success: false,\n                    error: \"Invalid query parameters\",\n                    details: validation.errors\n                });\n            }\n        }\n        // Sanitize strings (basic XSS prevention)\n        if (req.body && typeof req.body === \"object\") {\n            req.body = sanitizeObject(req.body);\n        }\n        return handler(req, res);\n    };\n};\n/**\r\n * Sanitize object to prevent XSS\r\n */ function sanitizeObject(obj) {\n    if (typeof obj === \"string\") {\n        return obj.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\").replace(/\\//g, \"&#x2F;\");\n    }\n    if (Array.isArray(obj)) {\n        return obj.map(sanitizeObject);\n    }\n    if (obj && typeof obj === \"object\") {\n        const sanitized = {};\n        for(const key in obj){\n            sanitized[key] = sanitizeObject(obj[key]);\n        }\n        return sanitized;\n    }\n    return obj;\n}\n/**\r\n * Logging Middleware\r\n * Logs all API requests with timing\r\n */ const withLogging = (handler)=>{\n    return async (req, res)=>{\n        const start = Date.now();\n        const { method, url } = req;\n        const ip = req.headers[\"x-forwarded-for\"]?.split(\",\")[0] || req.headers[\"x-real-ip\"] || \"unknown\";\n        console.log(`[${new Date().toISOString()}] ${method} ${url} - IP: ${ip}`);\n        try {\n            await handler(req, res);\n            const duration = Date.now() - start;\n            console.log(`[${new Date().toISOString()}] ${method} ${url} - ${res.statusCode} - ${duration}ms`);\n        } catch (error) {\n            const duration = Date.now() - start;\n            console.error(`[${new Date().toISOString()}] ${method} ${url} - ERROR - ${duration}ms`, error);\n            throw error;\n        }\n    };\n};\n/**\r\n * Error handler wrapper with detailed logging\r\n */ const withErrorHandler = (handler)=>{\n    return async (req, res)=>{\n        try {\n            return await handler(req, res);\n        } catch (error) {\n            console.error(\"API Error:\", {\n                error: error.message,\n                stack: error.stack,\n                method: req.method,\n                url: req.url,\n                body: req.body,\n                query: req.query\n            });\n            // Don't expose internal errors in production\n            const isDev = \"development\" === \"development\";\n            return res.status(500).json({\n                success: false,\n                error: isDev ? error.message : \"Internal server error\",\n                ...isDev && {\n                    stack: error.stack\n                }\n            });\n        }\n    };\n};\n/**\r\n * Combine multiple middleware functions\r\n */ const compose = (...middlewares)=>{\n    return (handler)=>{\n        return middlewares.reduceRight((acc, middleware)=>middleware(acc), handler);\n    };\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUssQ0FBQyxjQUFjO2dCQUMxQkEsT0FBT0EsTUFBTXdELE9BQU87Z0JBQ3BCQyxPQUFPekQsTUFBTXlELEtBQUs7Z0JBQ2xCekIsUUFBUXpDLElBQUl5QyxNQUFNO2dCQUNsQmtCLEtBQUszRCxJQUFJMkQsR0FBRztnQkFDWmQsTUFBTTdDLElBQUk2QyxJQUFJO2dCQUNkSyxPQUFPbEQsSUFBSWtELEtBQUs7WUFDbEI7WUFFQSw2Q0FBNkM7WUFDN0MsTUFBTWlCLFFBQVFDLGtCQUF5QjtZQUV2QyxPQUFPbkUsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLFNBQVM7Z0JBQ1RDLE9BQU8wRCxRQUFRMUQsTUFBTXdELE9BQU8sR0FBRztnQkFDL0IsR0FBSUUsU0FBUztvQkFBRUQsT0FBT3pELE1BQU15RCxLQUFLO2dCQUFDLENBQUM7WUFDckM7UUFDRjtJQUNGO0FBQ0YsRUFBRTtBQUVGOztDQUVDLEdBQ00sTUFBTUcsVUFBVSxDQUFDLEdBQUdDO0lBQ3pCLE9BQU8sQ0FBQ3ZFO1FBQ04sT0FBT3VFLFlBQVlDLFdBQVcsQ0FBQyxDQUFDQyxLQUFLQyxhQUFlQSxXQUFXRCxNQUFNekU7SUFDdkU7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9zdGVsLW5leHRqcy8uL2xpYi9taWRkbGV3YXJlLnRzPzk3OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSAnLi9hdXRoJztcclxuXHJcbi8vIFJhdGUgbGltaXRpbmcgc3RvcmUgKGluLW1lbW9yeSlcclxuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldEF0OiBudW1iZXIgfT4oKTtcclxuXHJcbi8qKlxyXG4gKiBGaXJlYmFzZSBBdXRoZW50aWNhdGlvbiBNaWRkbGV3YXJlXHJcbiAqIFZlcmlmaWVzIEZpcmViYXNlIElEIHRva2VucyBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVxdWlyZUF1dGggPSAoXHJcbiAgaGFuZGxlcjogKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiBQcm9taXNlPHZvaWQ+XHJcbikgPT4ge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEdldCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyXHJcbiAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG5cclxuICAgICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkIC0gTm8gdG9rZW4gcHJvdmlkZWQnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVmVyaWZ5IHRva2VuIHdpdGggRmlyZWJhc2UgKGNsaWVudC1zaWRlIGF1dGggb2JqZWN0KVxyXG4gICAgICAgIC8vIEluIGEgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCB3aXRoIEZpcmViYXNlIEFkbWluIFNESzpcclxuICAgICAgICAvLyBjb25zdCBkZWNvZGVkVG9rZW4gPSBhd2FpdCBhZG1pbi5hdXRoKCkudmVyaWZ5SWRUb2tlbih0b2tlbik7XHJcbiAgICAgICAgLy8gcmVxLnVzZXIgPSBkZWNvZGVkVG9rZW47XHJcblxyXG4gICAgICAgIC8vIEZvciBub3csIHdlIGNoZWNrIGlmIGF1dGguY3VycmVudFVzZXIgZXhpc3RzIChjbGllbnQtc2lkZSlcclxuICAgICAgICAvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCBjaGVjayAtIGluIHByb2R1Y3Rpb24gdXNlIEZpcmViYXNlIEFkbWluIFNES1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXV0aC5jdXJyZW50VXNlcjtcclxuXHJcbiAgICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkIC0gSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXR0YWNoIHVzZXIgaW5mbyB0byByZXF1ZXN0IChmb3IgbG9nZ2luZy90cmFja2luZylcclxuICAgICAgICAocmVxIGFzIGFueSkudXNlciA9IHtcclxuICAgICAgICAgIHVpZDogY3VycmVudFVzZXIudWlkLFxyXG4gICAgICAgICAgZW1haWw6IGN1cnJlbnRVc2VyLmVtYWlsLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIENhbGwgdGhlIGhhbmRsZXJcclxuICAgICAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgICAgIH0gY2F0Y2ggKHZlcmlmeUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gdmVyaWZpY2F0aW9uIGVycm9yOicsIHZlcmlmeUVycm9yKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCAtIFRva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRoIG1pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkIC0gQXV0aGVudGljYXRpb24gZmFpbGVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSYXRlIExpbWl0aW5nIE1pZGRsZXdhcmVcclxuICogTGltaXRzIHJlcXVlc3RzIHBlciBJUCBhZGRyZXNzXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgd2l0aFJhdGVMaW1pdCA9IChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD4sXHJcbiAgb3B0aW9uczogeyBtYXhSZXF1ZXN0cz86IG51bWJlcjsgd2luZG93TXM/OiBudW1iZXIgfSA9IHt9XHJcbikgPT4ge1xyXG4gIGNvbnN0IG1heFJlcXVlc3RzID0gb3B0aW9ucy5tYXhSZXF1ZXN0cyB8fCAxMDA7IC8vIDEwMCByZXF1ZXN0c1xyXG4gIGNvbnN0IHdpbmRvd01zID0gb3B0aW9ucy53aW5kb3dNcyB8fCAxNSAqIDYwICogMTAwMDsgLy8gMTUgbWludXRlc1xyXG5cclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICAvLyBHZXQgY2xpZW50IElQXHJcbiAgICBjb25zdCBpcCA9XHJcbiAgICAgIChyZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtZm9yJ10gYXMgc3RyaW5nKT8uc3BsaXQoJywnKVswXSB8fFxyXG4gICAgICAocmVxLmhlYWRlcnNbJ3gtcmVhbC1pcCddIGFzIHN0cmluZykgfHxcclxuICAgICAgJ3Vua25vd24nO1xyXG5cclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCByZWNvcmQgPSByYXRlTGltaXRTdG9yZS5nZXQoaXApO1xyXG5cclxuICAgIC8vIENsZWFuIHVwIGV4cGlyZWQgcmVjb3JkcyAoZXZlcnkgMTAwIHJlcXVlc3RzKVxyXG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAxKSB7XHJcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHJhdGVMaW1pdFN0b3JlLmVudHJpZXMoKSkge1xyXG4gICAgICAgIGlmICh2YWx1ZS5yZXNldEF0IDwgbm93KSB7XHJcbiAgICAgICAgICByYXRlTGltaXRTdG9yZS5kZWxldGUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVjb3JkKSB7XHJcbiAgICAgIGlmIChyZWNvcmQucmVzZXRBdCA+IG5vdykge1xyXG4gICAgICAgIC8vIFdpdGhpbiB3aW5kb3dcclxuICAgICAgICBpZiAocmVjb3JkLmNvdW50ID49IG1heFJlcXVlc3RzKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjkpLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgICAgICByZXRyeUFmdGVyOiBNYXRoLmNlaWwoKHJlY29yZC5yZXNldEF0IC0gbm93KSAvIDEwMDApLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlY29yZC5jb3VudCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFdpbmRvdyBleHBpcmVkLCByZXNldFxyXG4gICAgICAgIHJlY29yZC5jb3VudCA9IDE7XHJcbiAgICAgICAgcmVjb3JkLnJlc2V0QXQgPSBub3cgKyB3aW5kb3dNcztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTmV3IElQXHJcbiAgICAgIHJhdGVMaW1pdFN0b3JlLnNldChpcCwge1xyXG4gICAgICAgIGNvdW50OiAxLFxyXG4gICAgICAgIHJlc2V0QXQ6IG5vdyArIHdpbmRvd01zLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDT1JTIG1pZGRsZXdhcmUgZm9yIEFQSSByb3V0ZXNcclxuICovXHJcbmV4cG9ydCBjb25zdCB3aXRoQ29ycyA9IChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD5cclxuKSA9PiB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xyXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULE9QVElPTlMsUEFUQ0gsREVMRVRFLFBPU1QsUFVUJyk7XHJcbiAgICByZXMuc2V0SGVhZGVyKFxyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsXHJcbiAgICAgICdYLUNTUkYtVG9rZW4sIFgtUmVxdWVzdGVkLVdpdGgsIEFjY2VwdCwgQWNjZXB0LVZlcnNpb24sIENvbnRlbnQtTGVuZ3RoLCBDb250ZW50LU1ENSwgQ29udGVudC1UeXBlLCBEYXRlLCBYLUFwaS1WZXJzaW9uLCBBdXRob3JpemF0aW9uJ1xyXG4gICAgKTtcclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5lbmQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlcXVlc3QgVmFsaWRhdGlvbiBNaWRkbGV3YXJlXHJcbiAqIFZhbGlkYXRlcyBhbmQgc2FuaXRpemVzIHJlcXVlc3QgZGF0YVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHdpdGhWYWxpZGF0aW9uID0gKFxyXG4gIGhhbmRsZXI6IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4gUHJvbWlzZTx2b2lkPixcclxuICBzY2hlbWE/OiB7XHJcbiAgICBib2R5PzogKGRhdGE6IGFueSkgPT4geyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzPzogc3RyaW5nW10gfTtcclxuICAgIHF1ZXJ5PzogKGRhdGE6IGFueSkgPT4geyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzPzogc3RyaW5nW10gfTtcclxuICB9XHJcbikgPT4ge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICAgIC8vIFZhbGlkYXRlIGJvZHkgaWYgc2NoZW1hIHByb3ZpZGVkXHJcbiAgICBpZiAoc2NoZW1hPy5ib2R5ICYmIHJlcS5ib2R5KSB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBzY2hlbWEuYm9keShyZXEuYm9keSk7XHJcbiAgICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxyXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvcnMsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBxdWVyeSBwYXJhbXMgaWYgc2NoZW1hIHByb3ZpZGVkXHJcbiAgICBpZiAoc2NoZW1hPy5xdWVyeSAmJiByZXEucXVlcnkpIHtcclxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHNjaGVtYS5xdWVyeShyZXEucXVlcnkpO1xyXG4gICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcXVlcnkgcGFyYW1ldGVycycsXHJcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9ycyxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhbml0aXplIHN0cmluZ3MgKGJhc2ljIFhTUyBwcmV2ZW50aW9uKVxyXG4gICAgaWYgKHJlcS5ib2R5ICYmIHR5cGVvZiByZXEuYm9keSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgcmVxLmJvZHkgPSBzYW5pdGl6ZU9iamVjdChyZXEuYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpO1xyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU2FuaXRpemUgb2JqZWN0IHRvIHByZXZlbnQgWFNTXHJcbiAqL1xyXG5mdW5jdGlvbiBzYW5pdGl6ZU9iamVjdChvYmo6IGFueSk6IGFueSB7XHJcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gb2JqXHJcbiAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxyXG4gICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXHJcbiAgICAgIC5yZXBsYWNlKC8nL2csICcmI3gyNzsnKVxyXG4gICAgICAucmVwbGFjZSgvXFwvL2csICcmI3gyRjsnKTtcclxuICB9XHJcblxyXG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcclxuICAgIHJldHVybiBvYmoubWFwKHNhbml0aXplT2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcclxuICAgIGNvbnN0IHNhbml0aXplZDogYW55ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgc2FuaXRpemVkW2tleV0gPSBzYW5pdGl6ZU9iamVjdChvYmpba2V5XSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2FuaXRpemVkO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIExvZ2dpbmcgTWlkZGxld2FyZVxyXG4gKiBMb2dzIGFsbCBBUEkgcmVxdWVzdHMgd2l0aCB0aW1pbmdcclxuICovXHJcbmV4cG9ydCBjb25zdCB3aXRoTG9nZ2luZyA9IChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD5cclxuKSA9PiB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xyXG4gICAgY29uc3QgeyBtZXRob2QsIHVybCB9ID0gcmVxO1xyXG4gICAgY29uc3QgaXAgPVxyXG4gICAgICAocmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIGFzIHN0cmluZyk/LnNwbGl0KCcsJylbMF0gfHxcclxuICAgICAgKHJlcS5oZWFkZXJzWyd4LXJlYWwtaXAnXSBhcyBzdHJpbmcpIHx8XHJcbiAgICAgICd1bmtub3duJztcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gJHttZXRob2R9ICR7dXJsfSAtIElQOiAke2lwfWApO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xyXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dICR7bWV0aG9kfSAke3VybH0gLSAke3Jlcy5zdGF0dXNDb2RlfSAtICR7ZHVyYXRpb259bXNgXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICBgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gJHttZXRob2R9ICR7dXJsfSAtIEVSUk9SIC0gJHtkdXJhdGlvbn1tc2AsXHJcbiAgICAgICAgZXJyb3JcclxuICAgICAgKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFcnJvciBoYW5kbGVyIHdyYXBwZXIgd2l0aCBkZXRhaWxlZCBsb2dnaW5nXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgd2l0aEVycm9ySGFuZGxlciA9IChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD5cclxuKSA9PiB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6Jywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcclxuICAgICAgICBtZXRob2Q6IHJlcS5tZXRob2QsXHJcbiAgICAgICAgdXJsOiByZXEudXJsLFxyXG4gICAgICAgIGJvZHk6IHJlcS5ib2R5LFxyXG4gICAgICAgIHF1ZXJ5OiByZXEucXVlcnksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gRG9uJ3QgZXhwb3NlIGludGVybmFsIGVycm9ycyBpbiBwcm9kdWN0aW9uXHJcbiAgICAgIGNvbnN0IGlzRGV2ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBpc0RldiA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgICAuLi4oaXNEZXYgJiYgeyBzdGFjazogZXJyb3Iuc3RhY2sgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQ29tYmluZSBtdWx0aXBsZSBtaWRkbGV3YXJlIGZ1bmN0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNvbXBvc2UgPSAoLi4ubWlkZGxld2FyZXM6IEFycmF5PChoYW5kbGVyOiBhbnkpID0+IGFueT4pID0+IHtcclxuICByZXR1cm4gKGhhbmRsZXI6IGFueSkgPT4ge1xyXG4gICAgcmV0dXJuIG1pZGRsZXdhcmVzLnJlZHVjZVJpZ2h0KChhY2MsIG1pZGRsZXdhcmUpID0+IG1pZGRsZXdhcmUoYWNjKSwgaGFuZGxlcik7XHJcbiAgfTtcclxufTtcclxuIl0sIm5hbWVzIjpbImF1dGgiLCJyYXRlTGltaXRTdG9yZSIsIk1hcCIsInJlcXVpcmVBdXRoIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXJ0c1dpdGgiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwidG9rZW4iLCJyZXBsYWNlIiwiY3VycmVudFVzZXIiLCJ1c2VyIiwidWlkIiwiZW1haWwiLCJ2ZXJpZnlFcnJvciIsImNvbnNvbGUiLCJ3aXRoUmF0ZUxpbWl0Iiwib3B0aW9ucyIsIm1heFJlcXVlc3RzIiwid2luZG93TXMiLCJpcCIsInNwbGl0Iiwibm93IiwiRGF0ZSIsInJlY29yZCIsImdldCIsIk1hdGgiLCJyYW5kb20iLCJrZXkiLCJ2YWx1ZSIsImVudHJpZXMiLCJyZXNldEF0IiwiZGVsZXRlIiwiY291bnQiLCJyZXRyeUFmdGVyIiwiY2VpbCIsInNldCIsIndpdGhDb3JzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwiZW5kIiwid2l0aFZhbGlkYXRpb24iLCJzY2hlbWEiLCJib2R5IiwidmFsaWRhdGlvbiIsInZhbGlkIiwiZGV0YWlscyIsImVycm9ycyIsInF1ZXJ5Iiwic2FuaXRpemVPYmplY3QiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJzYW5pdGl6ZWQiLCJ3aXRoTG9nZ2luZyIsInN0YXJ0IiwidXJsIiwibG9nIiwidG9JU09TdHJpbmciLCJkdXJhdGlvbiIsInN0YXR1c0NvZGUiLCJ3aXRoRXJyb3JIYW5kbGVyIiwibWVzc2FnZSIsInN0YWNrIiwiaXNEZXYiLCJwcm9jZXNzIiwiY29tcG9zZSIsIm1pZGRsZXdhcmVzIiwicmVkdWNlUmlnaHQiLCJhY2MiLCJtaWRkbGV3YXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/middleware.ts\n");

/***/ }),

/***/ "(api)/./lib/news.ts":
/*!*********************!*\
  !*** ./lib/news.ts ***!
  \*********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNews: () => (/* binding */ createNews),\n/* harmony export */   deleteNews: () => (/* binding */ deleteNews),\n/* harmony export */   getAllNews: () => (/* binding */ getAllNews),\n/* harmony export */   getNewsByCategory: () => (/* binding */ getNewsByCategory),\n/* harmony export */   getNewsById: () => (/* binding */ getNewsById),\n/* harmony export */   getNewsBySlug: () => (/* binding */ getNewsBySlug),\n/* harmony export */   getNewsByStatus: () => (/* binding */ getNewsByStatus),\n/* harmony export */   getPopularNews: () => (/* binding */ getPopularNews),\n/* harmony export */   getPublishedNews: () => (/* binding */ getPublishedNews),\n/* harmony export */   getRecentNews: () => (/* binding */ getRecentNews),\n/* harmony export */   incrementNewsViews: () => (/* binding */ incrementNewsViews),\n/* harmony export */   updateNews: () => (/* binding */ updateNews)\n/* harmony export */ });\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./firebase */ \"(api)/./lib/firebase.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_firebase__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__]);\n([_firebase__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NEWS_COLLECTION = \"news\";\n// Helper function to convert Firestore document to NewsPost\nfunction docToNewsPost(doc) {\n    const data = doc.data();\n    return {\n        id: doc.id,\n        title: data.title || \"\",\n        slug: data.slug || \"\",\n        excerpt: data.excerpt || \"\",\n        content: data.content || \"\",\n        author: data.author || \"Admin\",\n        category: data.category || \"General\",\n        tags: data.tags || [],\n        featuredImage: data.featuredImage || \"\",\n        images: data.images || [],\n        status: data.status || \"draft\",\n        views: data.views || 0,\n        publishedAt: data.publishedAt?.toDate?.()?.toISOString() || data.publishedAt || null,\n        createdAt: data.createdAt?.toDate?.()?.toISOString() || new Date().toISOString(),\n        updatedAt: data.updatedAt?.toDate?.()?.toISOString() || new Date().toISOString()\n    };\n}\n// Get all news posts\nasync function getAllNews() {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const newsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(newsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)(\"createdAt\", \"desc\"));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsQuery);\n        return snapshot.docs.map(docToNewsPost);\n    } catch (error) {\n        console.error(\"Error fetching all news:\", error);\n        throw new Error(\"Failed to fetch news posts\");\n    }\n}\n// Get published news posts\nasync function getPublishedNews() {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsCollection);\n        // Filter and sort in memory to avoid index requirements\n        return snapshot.docs.map(docToNewsPost).filter((post)=>post.status === \"published\").sort((a, b)=>{\n            const dateA = new Date(a.publishedAt || a.createdAt).getTime();\n            const dateB = new Date(b.publishedAt || b.createdAt).getTime();\n            return dateB - dateA; // Descending order\n        });\n    } catch (error) {\n        console.error(\"Error fetching published news:\", error);\n        throw new Error(\"Failed to fetch published news\");\n    }\n}\n// Get news by status\nasync function getNewsByStatus(status) {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsCollection);\n        // Filter and sort in memory to avoid index requirements\n        return snapshot.docs.map(docToNewsPost).filter((post)=>post.status === status).sort((a, b)=>{\n            const dateA = new Date(a.createdAt).getTime();\n            const dateB = new Date(b.createdAt).getTime();\n            return dateB - dateA; // Descending order\n        });\n    } catch (error) {\n        console.error(`Error fetching ${status} news:`, error);\n        throw new Error(`Failed to fetch ${status} news`);\n    }\n}\n// Get news by category\nasync function getNewsByCategory(category) {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsCollection);\n        // Filter and sort in memory to avoid index requirements\n        return snapshot.docs.map(docToNewsPost).filter((post)=>post.category === category && post.status === \"published\").sort((a, b)=>{\n            const dateA = new Date(a.publishedAt || a.createdAt).getTime();\n            const dateB = new Date(b.publishedAt || b.createdAt).getTime();\n            return dateB - dateA; // Descending order\n        });\n    } catch (error) {\n        console.error(`Error fetching news by category ${category}:`, error);\n        throw new Error(`Failed to fetch news by category`);\n    }\n}\n// Get single news post by ID\nasync function getNewsById(id) {\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION, id);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        if (!docSnap.exists()) {\n            return null;\n        }\n        return docToNewsPost(docSnap);\n    } catch (error) {\n        console.error(\"Error fetching news by ID:\", error);\n        throw new Error(\"Failed to fetch news post\");\n    }\n}\n// Get news post by slug\nasync function getNewsBySlug(slug) {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const newsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(newsCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"slug\", \"==\", slug));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsQuery);\n        if (snapshot.empty) {\n            return null;\n        }\n        return docToNewsPost(snapshot.docs[0]);\n    } catch (error) {\n        console.error(\"Error fetching news by slug:\", error);\n        throw new Error(\"Failed to fetch news post\");\n    }\n}\n// Create news post\nasync function createNews(input) {\n    try {\n        const now = firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now();\n        const newsData = {\n            ...input,\n            images: input.images || [],\n            views: 0,\n            publishedAt: input.publishedAt ? firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.fromDate(new Date(input.publishedAt)) : null,\n            createdAt: now,\n            updatedAt: now\n        };\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION), newsData);\n        const newDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        return docToNewsPost(newDoc);\n    } catch (error) {\n        console.error(\"Error creating news:\", error);\n        throw new Error(\"Failed to create news post\");\n    }\n}\n// Update news post\nasync function updateNews(id, updates) {\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION, id);\n        const updateData = {\n            ...updates,\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now()\n        };\n        if (updates.publishedAt) {\n            updateData.publishedAt = firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.fromDate(new Date(updates.publishedAt));\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, updateData);\n        const updatedDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        return docToNewsPost(updatedDoc);\n    } catch (error) {\n        console.error(\"Error updating news:\", error);\n        throw new Error(\"Failed to update news post\");\n    }\n}\n// Delete news post\nasync function deleteNews(id) {\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION, id);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(docRef);\n    } catch (error) {\n        console.error(\"Error deleting news:\", error);\n        throw new Error(\"Failed to delete news post\");\n    }\n}\n// Increment news views\nasync function incrementNewsViews(id) {\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION, id);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, {\n            views: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.increment)(1)\n        });\n    } catch (error) {\n        console.error(\"Error incrementing news views:\", error);\n    // Don't throw error for view increment failures\n    }\n}\n// Get recent news (published only)\nasync function getRecentNews(limit = 5) {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsCollection);\n        // Filter and sort in memory to avoid index requirements\n        return snapshot.docs.map(docToNewsPost).filter((post)=>post.status === \"published\").sort((a, b)=>{\n            const dateA = new Date(a.publishedAt || a.createdAt).getTime();\n            const dateB = new Date(b.publishedAt || b.createdAt).getTime();\n            return dateB - dateA; // Descending order\n        }).slice(0, limit);\n    } catch (error) {\n        console.error(\"Error fetching recent news:\", error);\n        throw new Error(\"Failed to fetch recent news\");\n    }\n}\n// Get popular news (by views)\nasync function getPopularNews(limit = 5) {\n    try {\n        const newsCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, NEWS_COLLECTION);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(newsCollection);\n        // Filter and sort in memory to avoid index requirements\n        return snapshot.docs.map(docToNewsPost).filter((post)=>post.status === \"published\").sort((a, b)=>b.views - a.views) // Descending order by views\n        .slice(0, limit);\n    } catch (error) {\n        console.error(\"Error fetching popular news:\", error);\n        throw new Error(\"Failed to fetch popular news\");\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnQixDQUFDO0lBQ3BELElBQUk7UUFDRixNQUFNdEMsaUJBQWlCbEMsOERBQVVBLENBQUNELHlDQUFFQSxFQUFFYTtRQUN0QyxNQUFNd0IsV0FBVyxNQUFNbEMsMkRBQU9BLENBQUNnQztRQUUvQix3REFBd0Q7UUFDeEQsT0FBT0UsU0FBU0MsSUFBSSxDQUNqQkMsR0FBRyxDQUFDekIsZUFDSjhCLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS25CLE1BQU0sS0FBSyxhQUMvQm9CLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFckIsS0FBSyxHQUFHb0IsRUFBRXBCLEtBQUssRUFBRSw0QkFBNEI7U0FDOUQrQyxLQUFLLENBQUMsR0FBR0Q7SUFDZCxFQUFFLE9BQU9qQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9zdGVsLW5leHRqcy8uL2xpYi9uZXdzLnRzPzE0ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tICcuL2ZpcmViYXNlJztcbmltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGRvYyxcbiAgZ2V0RG9jcyxcbiAgZ2V0RG9jLFxuICBhZGREb2MsXG4gIHVwZGF0ZURvYyxcbiAgZGVsZXRlRG9jLFxuICBxdWVyeSxcbiAgd2hlcmUsXG4gIG9yZGVyQnksXG4gIFRpbWVzdGFtcCxcbiAgaW5jcmVtZW50LFxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgTmV3c1Bvc3QsIENyZWF0ZU5ld3NJbnB1dCB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgTkVXU19DT0xMRUNUSU9OID0gJ25ld3MnO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBGaXJlc3RvcmUgZG9jdW1lbnQgdG8gTmV3c1Bvc3RcbmZ1bmN0aW9uIGRvY1RvTmV3c1Bvc3QoZG9jOiBhbnkpOiBOZXdzUG9zdCB7XG4gIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICByZXR1cm4ge1xuICAgIGlkOiBkb2MuaWQsXG4gICAgdGl0bGU6IGRhdGEudGl0bGUgfHwgJycsXG4gICAgc2x1ZzogZGF0YS5zbHVnIHx8ICcnLFxuICAgIGV4Y2VycHQ6IGRhdGEuZXhjZXJwdCB8fCAnJyxcbiAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQgfHwgJycsXG4gICAgYXV0aG9yOiBkYXRhLmF1dGhvciB8fCAnQWRtaW4nLFxuICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdHZW5lcmFsJyxcbiAgICB0YWdzOiBkYXRhLnRhZ3MgfHwgW10sXG4gICAgZmVhdHVyZWRJbWFnZTogZGF0YS5mZWF0dXJlZEltYWdlIHx8ICcnLFxuICAgIGltYWdlczogZGF0YS5pbWFnZXMgfHwgW10sXG4gICAgc3RhdHVzOiBkYXRhLnN0YXR1cyB8fCAnZHJhZnQnLFxuICAgIHZpZXdzOiBkYXRhLnZpZXdzIHx8IDAsXG4gICAgcHVibGlzaGVkQXQ6IGRhdGEucHVibGlzaGVkQXQ/LnRvRGF0ZT8uKCk/LnRvSVNPU3RyaW5nKCkgfHwgZGF0YS5wdWJsaXNoZWRBdCB8fCBudWxsLFxuICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZT8uKCk/LnRvSVNPU3RyaW5nKCkgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZT8uKCk/LnRvSVNPU3RyaW5nKCkgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xufVxuXG4vLyBHZXQgYWxsIG5ld3MgcG9zdHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxOZXdzKCk6IFByb21pc2U8TmV3c1Bvc3RbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5ld3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgTkVXU19DT0xMRUNUSU9OKTtcbiAgICBjb25zdCBuZXdzUXVlcnkgPSBxdWVyeShuZXdzQ29sbGVjdGlvbiwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKSk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG5ld3NRdWVyeSk7XG5cbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoZG9jVG9OZXdzUG9zdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIG5ld3M6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIG5ld3MgcG9zdHMnKTtcbiAgfVxufVxuXG4vLyBHZXQgcHVibGlzaGVkIG5ld3MgcG9zdHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQdWJsaXNoZWROZXdzKCk6IFByb21pc2U8TmV3c1Bvc3RbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5ld3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgTkVXU19DT0xMRUNUSU9OKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobmV3c0NvbGxlY3Rpb24pO1xuXG4gICAgLy8gRmlsdGVyIGFuZCBzb3J0IGluIG1lbW9yeSB0byBhdm9pZCBpbmRleCByZXF1aXJlbWVudHNcbiAgICByZXR1cm4gc25hcHNob3QuZG9jc1xuICAgICAgLm1hcChkb2NUb05ld3NQb3N0KVxuICAgICAgLmZpbHRlcihwb3N0ID0+IHBvc3Quc3RhdHVzID09PSAncHVibGlzaGVkJylcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGVBID0gbmV3IERhdGUoYS5wdWJsaXNoZWRBdCB8fCBhLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCBkYXRlQiA9IG5ldyBEYXRlKGIucHVibGlzaGVkQXQgfHwgYi5jcmVhdGVkQXQpLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuIGRhdGVCIC0gZGF0ZUE7IC8vIERlc2NlbmRpbmcgb3JkZXJcbiAgICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHB1Ymxpc2hlZCBuZXdzOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBwdWJsaXNoZWQgbmV3cycpO1xuICB9XG59XG5cbi8vIEdldCBuZXdzIGJ5IHN0YXR1c1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5ld3NCeVN0YXR1cyhzdGF0dXM6ICdkcmFmdCcgfCAncHVibGlzaGVkJyB8ICdhcmNoaXZlZCcpOiBQcm9taXNlPE5ld3NQb3N0W10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBuZXdzQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb24oZGIsIE5FV1NfQ09MTEVDVElPTik7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG5ld3NDb2xsZWN0aW9uKTtcblxuICAgIC8vIEZpbHRlciBhbmQgc29ydCBpbiBtZW1vcnkgdG8gYXZvaWQgaW5kZXggcmVxdWlyZW1lbnRzXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3NcbiAgICAgIC5tYXAoZG9jVG9OZXdzUG9zdClcbiAgICAgIC5maWx0ZXIocG9zdCA9PiBwb3N0LnN0YXR1cyA9PT0gc3RhdHVzKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCBkYXRlQiA9IG5ldyBEYXRlKGIuY3JlYXRlZEF0KS5nZXRUaW1lKCk7XG4gICAgICAgIHJldHVybiBkYXRlQiAtIGRhdGVBOyAvLyBEZXNjZW5kaW5nIG9yZGVyXG4gICAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyAke3N0YXR1c30gbmV3czpgLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggJHtzdGF0dXN9IG5ld3NgKTtcbiAgfVxufVxuXG4vLyBHZXQgbmV3cyBieSBjYXRlZ29yeVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5ld3NCeUNhdGVnb3J5KGNhdGVnb3J5OiBzdHJpbmcpOiBQcm9taXNlPE5ld3NQb3N0W10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBuZXdzQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb24oZGIsIE5FV1NfQ09MTEVDVElPTik7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG5ld3NDb2xsZWN0aW9uKTtcblxuICAgIC8vIEZpbHRlciBhbmQgc29ydCBpbiBtZW1vcnkgdG8gYXZvaWQgaW5kZXggcmVxdWlyZW1lbnRzXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3NcbiAgICAgIC5tYXAoZG9jVG9OZXdzUG9zdClcbiAgICAgIC5maWx0ZXIocG9zdCA9PiBwb3N0LmNhdGVnb3J5ID09PSBjYXRlZ29yeSAmJiBwb3N0LnN0YXR1cyA9PT0gJ3B1Ymxpc2hlZCcpXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBkYXRlQSA9IG5ldyBEYXRlKGEucHVibGlzaGVkQXQgfHwgYS5jcmVhdGVkQXQpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgZGF0ZUIgPSBuZXcgRGF0ZShiLnB1Ymxpc2hlZEF0IHx8IGIuY3JlYXRlZEF0KS5nZXRUaW1lKCk7XG4gICAgICAgIHJldHVybiBkYXRlQiAtIGRhdGVBOyAvLyBEZXNjZW5kaW5nIG9yZGVyXG4gICAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBuZXdzIGJ5IGNhdGVnb3J5ICR7Y2F0ZWdvcnl9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBuZXdzIGJ5IGNhdGVnb3J5YCk7XG4gIH1cbn1cblxuLy8gR2V0IHNpbmdsZSBuZXdzIHBvc3QgYnkgSURcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROZXdzQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxOZXdzUG9zdCB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIE5FV1NfQ09MTEVDVElPTiwgaWQpO1xuICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcblxuICAgIGlmICghZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvY1RvTmV3c1Bvc3QoZG9jU25hcCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbmV3cyBieSBJRDonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggbmV3cyBwb3N0Jyk7XG4gIH1cbn1cblxuLy8gR2V0IG5ld3MgcG9zdCBieSBzbHVnXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmV3c0J5U2x1ZyhzbHVnOiBzdHJpbmcpOiBQcm9taXNlPE5ld3NQb3N0IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5ld3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgTkVXU19DT0xMRUNUSU9OKTtcbiAgICBjb25zdCBuZXdzUXVlcnkgPSBxdWVyeShuZXdzQ29sbGVjdGlvbiwgd2hlcmUoJ3NsdWcnLCAnPT0nLCBzbHVnKSk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG5ld3NRdWVyeSk7XG5cbiAgICBpZiAoc25hcHNob3QuZW1wdHkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBkb2NUb05ld3NQb3N0KHNuYXBzaG90LmRvY3NbMF0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5ld3MgYnkgc2x1ZzonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggbmV3cyBwb3N0Jyk7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIG5ld3MgcG9zdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5ld3MoaW5wdXQ6IENyZWF0ZU5ld3NJbnB1dCk6IFByb21pc2U8TmV3c1Bvc3Q+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3cgPSBUaW1lc3RhbXAubm93KCk7XG5cbiAgICBjb25zdCBuZXdzRGF0YSA9IHtcbiAgICAgIC4uLmlucHV0LFxuICAgICAgaW1hZ2VzOiBpbnB1dC5pbWFnZXMgfHwgW10sXG4gICAgICB2aWV3czogMCxcbiAgICAgIHB1Ymxpc2hlZEF0OiBpbnB1dC5wdWJsaXNoZWRBdCA/IFRpbWVzdGFtcC5mcm9tRGF0ZShuZXcgRGF0ZShpbnB1dC5wdWJsaXNoZWRBdCkpIDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgfTtcblxuICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCBORVdTX0NPTExFQ1RJT04pLCBuZXdzRGF0YSk7XG4gICAgY29uc3QgbmV3RG9jID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG5cbiAgICByZXR1cm4gZG9jVG9OZXdzUG9zdChuZXdEb2MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ld3M6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBuZXdzIHBvc3QnKTtcbiAgfVxufVxuXG4vLyBVcGRhdGUgbmV3cyBwb3N0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTmV3cyhpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPENyZWF0ZU5ld3NJbnB1dD4pOiBQcm9taXNlPE5ld3NQb3N0PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBORVdTX0NPTExFQ1RJT04sIGlkKTtcblxuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICB9O1xuXG4gICAgaWYgKHVwZGF0ZXMucHVibGlzaGVkQXQpIHtcbiAgICAgIHVwZGF0ZURhdGEucHVibGlzaGVkQXQgPSBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUodXBkYXRlcy5wdWJsaXNoZWRBdCkpO1xuICAgIH1cblxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHVwZGF0ZURhdGEpO1xuXG4gICAgY29uc3QgdXBkYXRlZERvYyA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgIHJldHVybiBkb2NUb05ld3NQb3N0KHVwZGF0ZWREb2MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG5ld3M6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBuZXdzIHBvc3QnKTtcbiAgfVxufVxuXG4vLyBEZWxldGUgbmV3cyBwb3N0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlTmV3cyhpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBORVdTX0NPTExFQ1RJT04sIGlkKTtcbiAgICBhd2FpdCBkZWxldGVEb2MoZG9jUmVmKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBuZXdzOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgbmV3cyBwb3N0Jyk7XG4gIH1cbn1cblxuLy8gSW5jcmVtZW50IG5ld3Mgdmlld3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbmNyZW1lbnROZXdzVmlld3MoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgTkVXU19DT0xMRUNUSU9OLCBpZCk7XG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwge1xuICAgICAgdmlld3M6IGluY3JlbWVudCgxKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbmNyZW1lbnRpbmcgbmV3cyB2aWV3czonLCBlcnJvcik7XG4gICAgLy8gRG9uJ3QgdGhyb3cgZXJyb3IgZm9yIHZpZXcgaW5jcmVtZW50IGZhaWx1cmVzXG4gIH1cbn1cblxuLy8gR2V0IHJlY2VudCBuZXdzIChwdWJsaXNoZWQgb25seSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWNlbnROZXdzKGxpbWl0OiBudW1iZXIgPSA1KTogUHJvbWlzZTxOZXdzUG9zdFtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbmV3c0NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uKGRiLCBORVdTX0NPTExFQ1RJT04pO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhuZXdzQ29sbGVjdGlvbik7XG5cbiAgICAvLyBGaWx0ZXIgYW5kIHNvcnQgaW4gbWVtb3J5IHRvIGF2b2lkIGluZGV4IHJlcXVpcmVtZW50c1xuICAgIHJldHVybiBzbmFwc2hvdC5kb2NzXG4gICAgICAubWFwKGRvY1RvTmV3c1Bvc3QpXG4gICAgICAuZmlsdGVyKHBvc3QgPT4gcG9zdC5zdGF0dXMgPT09ICdwdWJsaXNoZWQnKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZUEgPSBuZXcgRGF0ZShhLnB1Ymxpc2hlZEF0IHx8IGEuY3JlYXRlZEF0KS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IGRhdGVCID0gbmV3IERhdGUoYi5wdWJsaXNoZWRBdCB8fCBiLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuICAgICAgICByZXR1cm4gZGF0ZUIgLSBkYXRlQTsgLy8gRGVzY2VuZGluZyBvcmRlclxuICAgICAgfSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcmVjZW50IG5ld3M6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHJlY2VudCBuZXdzJyk7XG4gIH1cbn1cblxuLy8gR2V0IHBvcHVsYXIgbmV3cyAoYnkgdmlld3MpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9wdWxhck5ld3MobGltaXQ6IG51bWJlciA9IDUpOiBQcm9taXNlPE5ld3NQb3N0W10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBuZXdzQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb24oZGIsIE5FV1NfQ09MTEVDVElPTik7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG5ld3NDb2xsZWN0aW9uKTtcblxuICAgIC8vIEZpbHRlciBhbmQgc29ydCBpbiBtZW1vcnkgdG8gYXZvaWQgaW5kZXggcmVxdWlyZW1lbnRzXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3NcbiAgICAgIC5tYXAoZG9jVG9OZXdzUG9zdClcbiAgICAgIC5maWx0ZXIocG9zdCA9PiBwb3N0LnN0YXR1cyA9PT0gJ3B1Ymxpc2hlZCcpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi52aWV3cyAtIGEudmlld3MpIC8vIERlc2NlbmRpbmcgb3JkZXIgYnkgdmlld3NcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcG9wdWxhciBuZXdzOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBwb3B1bGFyIG5ld3MnKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImRiIiwiY29sbGVjdGlvbiIsImRvYyIsImdldERvY3MiLCJnZXREb2MiLCJhZGREb2MiLCJ1cGRhdGVEb2MiLCJkZWxldGVEb2MiLCJxdWVyeSIsIndoZXJlIiwib3JkZXJCeSIsIlRpbWVzdGFtcCIsImluY3JlbWVudCIsIk5FV1NfQ09MTEVDVElPTiIsImRvY1RvTmV3c1Bvc3QiLCJkYXRhIiwiaWQiLCJ0aXRsZSIsInNsdWciLCJleGNlcnB0IiwiY29udGVudCIsImF1dGhvciIsImNhdGVnb3J5IiwidGFncyIsImZlYXR1cmVkSW1hZ2UiLCJpbWFnZXMiLCJzdGF0dXMiLCJ2aWV3cyIsInB1Ymxpc2hlZEF0IiwidG9EYXRlIiwidG9JU09TdHJpbmciLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiZ2V0QWxsTmV3cyIsIm5ld3NDb2xsZWN0aW9uIiwibmV3c1F1ZXJ5Iiwic25hcHNob3QiLCJkb2NzIiwibWFwIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJnZXRQdWJsaXNoZWROZXdzIiwiZmlsdGVyIiwicG9zdCIsInNvcnQiLCJhIiwiYiIsImRhdGVBIiwiZ2V0VGltZSIsImRhdGVCIiwiZ2V0TmV3c0J5U3RhdHVzIiwiZ2V0TmV3c0J5Q2F0ZWdvcnkiLCJnZXROZXdzQnlJZCIsImRvY1JlZiIsImRvY1NuYXAiLCJleGlzdHMiLCJnZXROZXdzQnlTbHVnIiwiZW1wdHkiLCJjcmVhdGVOZXdzIiwiaW5wdXQiLCJub3ciLCJuZXdzRGF0YSIsImZyb21EYXRlIiwibmV3RG9jIiwidXBkYXRlTmV3cyIsInVwZGF0ZXMiLCJ1cGRhdGVEYXRhIiwidXBkYXRlZERvYyIsImRlbGV0ZU5ld3MiLCJpbmNyZW1lbnROZXdzVmlld3MiLCJnZXRSZWNlbnROZXdzIiwibGltaXQiLCJzbGljZSIsImdldFBvcHVsYXJOZXdzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/news.ts\n");

/***/ }),

/***/ "(api)/./pages/api/news/index.ts":
/*!*********************************!*\
  !*** ./pages/api/news/index.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_news__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/news */ \"(api)/./lib/news.ts\");\n/* harmony import */ var _lib_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/middleware */ \"(api)/./lib/middleware.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_news__WEBPACK_IMPORTED_MODULE_0__, _lib_middleware__WEBPACK_IMPORTED_MODULE_1__]);\n([_lib_news__WEBPACK_IMPORTED_MODULE_0__, _lib_middleware__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nasync function handler(req, res) {\n    if (req.method === \"GET\") {\n        return handleGet(req, res, req.query);\n    } else if (req.method === \"POST\") {\n        return handlePost(req, res, req.body);\n    } else {\n        return res.status(405).json({\n            success: false,\n            error: \"Method not allowed\"\n        });\n    }\n}\nasync function handleGet(req, res, query) {\n    const { status, category, search, page = \"1\", limit = \"12\", sortBy = \"publishedAt\", order = \"desc\" } = query;\n    const pageNum = parseInt(page, 10);\n    const limitNum = parseInt(limit, 10);\n    // Validation\n    if (isNaN(pageNum) || pageNum < 1) {\n        return res.status(400).json({\n            success: false,\n            error: \"Invalid page number\"\n        });\n    }\n    if (isNaN(limitNum) || limitNum < 1 || limitNum > 100) {\n        return res.status(400).json({\n            success: false,\n            error: \"Invalid limit (must be between 1 and 100)\"\n        });\n    }\n    try {\n        // Fetch news based on filters\n        let allNews;\n        if (category) {\n            allNews = await (0,_lib_news__WEBPACK_IMPORTED_MODULE_0__.getNewsByCategory)(category);\n        } else if (status && [\n            \"draft\",\n            \"published\",\n            \"archived\"\n        ].includes(status)) {\n            allNews = await (0,_lib_news__WEBPACK_IMPORTED_MODULE_0__.getNewsByStatus)(status);\n        } else if (status === \"all\") {\n            allNews = await (0,_lib_news__WEBPACK_IMPORTED_MODULE_0__.getAllNews)();\n        } else {\n            // Default: get published news only\n            allNews = await (0,_lib_news__WEBPACK_IMPORTED_MODULE_0__.getPublishedNews)();\n        }\n        // Apply search filter\n        if (search) {\n            const searchLower = search.toLowerCase();\n            allNews = allNews.filter((post)=>post.title.toLowerCase().includes(searchLower) || post.excerpt.toLowerCase().includes(searchLower) || post.content.toLowerCase().includes(searchLower) || post.author.toLowerCase().includes(searchLower) || post.tags.some((tag)=>tag.toLowerCase().includes(searchLower)));\n        }\n        // Apply sorting\n        allNews.sort((a, b)=>{\n            let aVal;\n            let bVal;\n            switch(sortBy){\n                case \"title\":\n                    aVal = a.title.toLowerCase();\n                    bVal = b.title.toLowerCase();\n                    break;\n                case \"views\":\n                    aVal = a.views;\n                    bVal = b.views;\n                    break;\n                case \"createdAt\":\n                    aVal = new Date(a.createdAt).getTime();\n                    bVal = new Date(b.createdAt).getTime();\n                    break;\n                case \"publishedAt\":\n                default:\n                    aVal = a.publishedAt ? new Date(a.publishedAt).getTime() : 0;\n                    bVal = b.publishedAt ? new Date(b.publishedAt).getTime() : 0;\n            }\n            if (order === \"asc\") {\n                return aVal > bVal ? 1 : -1;\n            } else {\n                return aVal < bVal ? 1 : -1;\n            }\n        });\n        // Pagination\n        const total = allNews.length;\n        const totalPages = Math.ceil(total / limitNum);\n        const startIndex = (pageNum - 1) * limitNum;\n        const endIndex = startIndex + limitNum;\n        const paginatedNews = allNews.slice(startIndex, endIndex);\n        return res.status(200).json({\n            success: true,\n            data: paginatedNews,\n            pagination: {\n                page: pageNum,\n                limit: limitNum,\n                total,\n                totalPages,\n                hasNext: pageNum < totalPages,\n                hasPrev: pageNum > 1\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching news:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error.message || \"Failed to fetch news\"\n        });\n    }\n}\nasync function handlePost(req, res, body) {\n    try {\n        const { newsData } = body;\n        if (!newsData) {\n            return res.status(400).json({\n                success: false,\n                error: \"Missing news data\"\n            });\n        }\n        // Validate required fields\n        const requiredFields = [\n            \"title\",\n            \"slug\",\n            \"excerpt\",\n            \"content\",\n            \"author\",\n            \"category\",\n            \"featuredImage\"\n        ];\n        const missingFields = requiredFields.filter((field)=>!newsData[field]);\n        if (missingFields.length > 0) {\n            return res.status(400).json({\n                success: false,\n                error: \"Missing required fields\",\n                details: missingFields.map((field)=>`${field} is required`)\n            });\n        }\n        // Create news input\n        const newsInput = {\n            title: newsData.title,\n            slug: newsData.slug,\n            excerpt: newsData.excerpt,\n            content: newsData.content,\n            author: newsData.author,\n            category: newsData.category,\n            tags: newsData.tags || [],\n            featuredImage: newsData.featuredImage,\n            images: newsData.images || [],\n            status: newsData.status || \"draft\",\n            publishedAt: newsData.publishedAt || undefined\n        };\n        const newPost = await (0,_lib_news__WEBPACK_IMPORTED_MODULE_0__.createNews)(newsInput);\n        return res.status(201).json({\n            success: true,\n            data: newPost,\n            message: \"News post created successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error creating news:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error.message || \"Failed to create news post\"\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_middleware__WEBPACK_IMPORTED_MODULE_1__.compose)(_lib_middleware__WEBPACK_IMPORTED_MODULE_1__.withCors, _lib_middleware__WEBPACK_IMPORTED_MODULE_1__.withRateLimit, _lib_middleware__WEBPACK_IMPORTED_MODULE_1__.withValidation, _lib_middleware__WEBPACK_IMPORTED_MODULE_1__.withLogging, _lib_middleware__WEBPACK_IMPORTED_MODULE_1__.withErrorHandler)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1Q0QyxNQUFNaUI7WUFDTlosU0FBUztRQUNYO0lBQ0YsRUFBRSxPQUFPaEQsT0FBWTtRQUNuQitDLFFBQVEvQyxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxPQUFPVCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU9BLE1BQU1nRCxPQUFPLElBQUk7UUFDMUI7SUFDRjtBQUNGO0FBRUEsaUVBQWVqRSx3REFBT0EsQ0FDcEJDLHFEQUFRQSxFQUNSQywwREFBYUEsRUFDYkMsMkRBQWNBLEVBQ2RDLHdEQUFXQSxFQUNYQyw2REFBZ0JBLEVBQ2hCQyxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9zdGVsLW5leHRqcy8uL3BhZ2VzL2FwaS9uZXdzL2luZGV4LnRzPzhkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHtcbiAgZ2V0QWxsTmV3cyxcbiAgZ2V0UHVibGlzaGVkTmV3cyxcbiAgZ2V0TmV3c0J5U3RhdHVzLFxuICBnZXROZXdzQnlDYXRlZ29yeSxcbiAgY3JlYXRlTmV3cyxcbn0gZnJvbSAnLi4vLi4vLi4vbGliL25ld3MnO1xuaW1wb3J0IHsgQXBpUmVzcG9uc2UsIE5ld3NQb3N0LCBDcmVhdGVOZXdzSW5wdXQgfSBmcm9tICcuLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQge1xuICBjb21wb3NlLFxuICB3aXRoQ29ycyxcbiAgd2l0aFJhdGVMaW1pdCxcbiAgd2l0aFZhbGlkYXRpb24sXG4gIHdpdGhMb2dnaW5nLFxuICB3aXRoRXJyb3JIYW5kbGVyLFxufSBmcm9tICcuLi8uLi8uLi9saWIvbWlkZGxld2FyZSc7XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2U8QXBpUmVzcG9uc2U8TmV3c1Bvc3RbXSB8IE5ld3NQb3N0Pj4pIHtcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIGhhbmRsZUdldChyZXEsIHJlcywgcmVxLnF1ZXJ5KTtcbiAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gaGFuZGxlUG9zdChyZXEsIHJlcywgcmVxLmJvZHkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyxcbiAgICB9KTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVHZXQoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlPEFwaVJlc3BvbnNlPE5ld3NQb3N0W10+PixcbiAgcXVlcnk6IGFueVxuKSB7XG4gIGNvbnN0IHtcbiAgICBzdGF0dXMsXG4gICAgY2F0ZWdvcnksXG4gICAgc2VhcmNoLFxuICAgIHBhZ2UgPSAnMScsXG4gICAgbGltaXQgPSAnMTInLFxuICAgIHNvcnRCeSA9ICdwdWJsaXNoZWRBdCcsXG4gICAgb3JkZXIgPSAnZGVzYycsXG4gIH0gPSBxdWVyeTtcblxuICBjb25zdCBwYWdlTnVtID0gcGFyc2VJbnQocGFnZSBhcyBzdHJpbmcsIDEwKTtcbiAgY29uc3QgbGltaXROdW0gPSBwYXJzZUludChsaW1pdCBhcyBzdHJpbmcsIDEwKTtcblxuICAvLyBWYWxpZGF0aW9uXG4gIGlmIChpc05hTihwYWdlTnVtKSB8fCBwYWdlTnVtIDwgMSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnSW52YWxpZCBwYWdlIG51bWJlcicsXG4gICAgfSk7XG4gIH1cblxuICBpZiAoaXNOYU4obGltaXROdW0pIHx8IGxpbWl0TnVtIDwgMSB8fCBsaW1pdE51bSA+IDEwMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnSW52YWxpZCBsaW1pdCAobXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMCknLFxuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBGZXRjaCBuZXdzIGJhc2VkIG9uIGZpbHRlcnNcbiAgICBsZXQgYWxsTmV3czogTmV3c1Bvc3RbXTtcblxuICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgYWxsTmV3cyA9IGF3YWl0IGdldE5ld3NCeUNhdGVnb3J5KGNhdGVnb3J5KTtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyAmJiBbJ2RyYWZ0JywgJ3B1Ymxpc2hlZCcsICdhcmNoaXZlZCddLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgIGFsbE5ld3MgPSBhd2FpdCBnZXROZXdzQnlTdGF0dXMoc3RhdHVzIGFzICdkcmFmdCcgfCAncHVibGlzaGVkJyB8ICdhcmNoaXZlZCcpO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnYWxsJykge1xuICAgICAgYWxsTmV3cyA9IGF3YWl0IGdldEFsbE5ld3MoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVmYXVsdDogZ2V0IHB1Ymxpc2hlZCBuZXdzIG9ubHlcbiAgICAgIGFsbE5ld3MgPSBhd2FpdCBnZXRQdWJsaXNoZWROZXdzKCk7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgc2VhcmNoIGZpbHRlclxuICAgIGlmIChzZWFyY2gpIHtcbiAgICAgIGNvbnN0IHNlYXJjaExvd2VyID0gKHNlYXJjaCBhcyBzdHJpbmcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBhbGxOZXdzID0gYWxsTmV3cy5maWx0ZXIoXG4gICAgICAgIChwb3N0KSA9PlxuICAgICAgICAgIHBvc3QudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcbiAgICAgICAgICBwb3N0LmV4Y2VycHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcbiAgICAgICAgICBwb3N0LmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcbiAgICAgICAgICBwb3N0LmF1dGhvci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxuICAgICAgICAgIHBvc3QudGFncy5zb21lKCh0YWcpID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgc29ydGluZ1xuICAgIGFsbE5ld3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgbGV0IGFWYWw6IHN0cmluZyB8IG51bWJlcjtcbiAgICAgIGxldCBiVmFsOiBzdHJpbmcgfCBudW1iZXI7XG5cbiAgICAgIHN3aXRjaCAoc29ydEJ5KSB7XG4gICAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgICBhVmFsID0gYS50aXRsZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGJWYWwgPSBiLnRpdGxlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZpZXdzJzpcbiAgICAgICAgICBhVmFsID0gYS52aWV3cztcbiAgICAgICAgICBiVmFsID0gYi52aWV3cztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY3JlYXRlZEF0JzpcbiAgICAgICAgICBhVmFsID0gbmV3IERhdGUoYS5jcmVhdGVkQXQpLmdldFRpbWUoKTtcbiAgICAgICAgICBiVmFsID0gbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncHVibGlzaGVkQXQnOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGFWYWwgPSBhLnB1Ymxpc2hlZEF0ID8gbmV3IERhdGUoYS5wdWJsaXNoZWRBdCkuZ2V0VGltZSgpIDogMDtcbiAgICAgICAgICBiVmFsID0gYi5wdWJsaXNoZWRBdCA/IG5ldyBEYXRlKGIucHVibGlzaGVkQXQpLmdldFRpbWUoKSA6IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcmRlciA9PT0gJ2FzYycpIHtcbiAgICAgICAgcmV0dXJuIGFWYWwgPiBiVmFsID8gMSA6IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFWYWwgPCBiVmFsID8gMSA6IC0xO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUGFnaW5hdGlvblxuICAgIGNvbnN0IHRvdGFsID0gYWxsTmV3cy5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0TnVtKTtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gKHBhZ2VOdW0gLSAxKSAqIGxpbWl0TnVtO1xuICAgIGNvbnN0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIGxpbWl0TnVtO1xuICAgIGNvbnN0IHBhZ2luYXRlZE5ld3MgPSBhbGxOZXdzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogcGFnaW5hdGVkTmV3cyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZTogcGFnZU51bSxcbiAgICAgICAgbGltaXQ6IGxpbWl0TnVtLFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgICAgaGFzTmV4dDogcGFnZU51bSA8IHRvdGFsUGFnZXMsXG4gICAgICAgIGhhc1ByZXY6IHBhZ2VOdW0gPiAxLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5ld3M6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZmV0Y2ggbmV3cycsXG4gICAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUG9zdChcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2U8QXBpUmVzcG9uc2U8TmV3c1Bvc3Q+PixcbiAgYm9keTogYW55XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG5ld3NEYXRhIH0gPSBib2R5O1xuXG4gICAgaWYgKCFuZXdzRGF0YSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnTWlzc2luZyBuZXdzIGRhdGEnLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ3RpdGxlJywgJ3NsdWcnLCAnZXhjZXJwdCcsICdjb250ZW50JywgJ2F1dGhvcicsICdjYXRlZ29yeScsICdmZWF0dXJlZEltYWdlJ107XG4gICAgY29uc3QgbWlzc2luZ0ZpZWxkcyA9IHJlcXVpcmVkRmllbGRzLmZpbHRlcigoZmllbGQpID0+ICFuZXdzRGF0YVtmaWVsZF0pO1xuXG4gICAgaWYgKG1pc3NpbmdGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnLFxuICAgICAgICBkZXRhaWxzOiBtaXNzaW5nRmllbGRzLm1hcCgoZmllbGQpID0+IGAke2ZpZWxkfSBpcyByZXF1aXJlZGApLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG5ld3MgaW5wdXRcbiAgICBjb25zdCBuZXdzSW5wdXQ6IENyZWF0ZU5ld3NJbnB1dCA9IHtcbiAgICAgIHRpdGxlOiBuZXdzRGF0YS50aXRsZSxcbiAgICAgIHNsdWc6IG5ld3NEYXRhLnNsdWcsXG4gICAgICBleGNlcnB0OiBuZXdzRGF0YS5leGNlcnB0LFxuICAgICAgY29udGVudDogbmV3c0RhdGEuY29udGVudCxcbiAgICAgIGF1dGhvcjogbmV3c0RhdGEuYXV0aG9yLFxuICAgICAgY2F0ZWdvcnk6IG5ld3NEYXRhLmNhdGVnb3J5LFxuICAgICAgdGFnczogbmV3c0RhdGEudGFncyB8fCBbXSxcbiAgICAgIGZlYXR1cmVkSW1hZ2U6IG5ld3NEYXRhLmZlYXR1cmVkSW1hZ2UsXG4gICAgICBpbWFnZXM6IG5ld3NEYXRhLmltYWdlcyB8fCBbXSxcbiAgICAgIHN0YXR1czogbmV3c0RhdGEuc3RhdHVzIHx8ICdkcmFmdCcsXG4gICAgICBwdWJsaXNoZWRBdDogbmV3c0RhdGEucHVibGlzaGVkQXQgfHwgdW5kZWZpbmVkLFxuICAgIH07XG5cbiAgICBjb25zdCBuZXdQb3N0ID0gYXdhaXQgY3JlYXRlTmV3cyhuZXdzSW5wdXQpO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBuZXdQb3N0LFxuICAgICAgbWVzc2FnZTogJ05ld3MgcG9zdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBuZXdzOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGNyZWF0ZSBuZXdzIHBvc3QnLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvc2UoXG4gIHdpdGhDb3JzLFxuICB3aXRoUmF0ZUxpbWl0LFxuICB3aXRoVmFsaWRhdGlvbixcbiAgd2l0aExvZ2dpbmcsXG4gIHdpdGhFcnJvckhhbmRsZXJcbikoaGFuZGxlcik7XG4iXSwibmFtZXMiOlsiZ2V0QWxsTmV3cyIsImdldFB1Ymxpc2hlZE5ld3MiLCJnZXROZXdzQnlTdGF0dXMiLCJnZXROZXdzQnlDYXRlZ29yeSIsImNyZWF0ZU5ld3MiLCJjb21wb3NlIiwid2l0aENvcnMiLCJ3aXRoUmF0ZUxpbWl0Iiwid2l0aFZhbGlkYXRpb24iLCJ3aXRoTG9nZ2luZyIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaGFuZGxlR2V0IiwicXVlcnkiLCJoYW5kbGVQb3N0IiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJjYXRlZ29yeSIsInNlYXJjaCIsInBhZ2UiLCJsaW1pdCIsInNvcnRCeSIsIm9yZGVyIiwicGFnZU51bSIsInBhcnNlSW50IiwibGltaXROdW0iLCJpc05hTiIsImFsbE5ld3MiLCJpbmNsdWRlcyIsInNlYXJjaExvd2VyIiwidG9Mb3dlckNhc2UiLCJmaWx0ZXIiLCJwb3N0IiwidGl0bGUiLCJleGNlcnB0IiwiY29udGVudCIsImF1dGhvciIsInRhZ3MiLCJzb21lIiwidGFnIiwic29ydCIsImEiLCJiIiwiYVZhbCIsImJWYWwiLCJ2aWV3cyIsIkRhdGUiLCJjcmVhdGVkQXQiLCJnZXRUaW1lIiwicHVibGlzaGVkQXQiLCJ0b3RhbCIsImxlbmd0aCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInBhZ2luYXRlZE5ld3MiLCJzbGljZSIsImRhdGEiLCJwYWdpbmF0aW9uIiwiaGFzTmV4dCIsImhhc1ByZXYiLCJjb25zb2xlIiwibWVzc2FnZSIsIm5ld3NEYXRhIiwicmVxdWlyZWRGaWVsZHMiLCJtaXNzaW5nRmllbGRzIiwiZmllbGQiLCJkZXRhaWxzIiwibWFwIiwibmV3c0lucHV0Iiwic2x1ZyIsImZlYXR1cmVkSW1hZ2UiLCJpbWFnZXMiLCJ1bmRlZmluZWQiLCJuZXdQb3N0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/news/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnews%2Findex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();